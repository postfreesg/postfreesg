document.addEventListener("DOMContentLoaded",()=>{let p=location.pathname,u=location.href,t=document.querySelector("h1")?.innerText||document.title,pt=document.body.innerText||"",d=document.querySelector("time")?.getAttribute("datetime")||"",o="PostFreeSG",dr=document.querySelector('meta[name="description"]')?.content||"";(function(){let h=location.pathname;"/"!==h&&!h.endsWith(".html")&&(h=h.replace(/\/$/,"")+".html"),h=h.replace(/index\.html$/,"");let c=location.origin+h;location.origin===c&&(c+="/");let l=document.querySelector('link[rel="canonical"]')||document.createElement("link");l.rel="canonical",l.href=c,l.parentNode||document.head.appendChild(l)})();function ed(r,p,t){r=r.replace(/\s+/g," ").trim();let f=p.split(".")[0];f&&f.length>40&&f.length<200&&(r=f.trim());let ct=t.replace(/[^a-zA-Z0-9 ]/g,""),k=ct.split(" ")[0];k&&!r.toLowerCase().includes(k.toLowerCase())&&(r=ct+": "+r);["free classifieds","Singapore","property","jobs","services"].forEach(x=>{r.toLowerCase().includes(x)||(r+=", "+x)});return r.length>155?r.substring(0,152)+"...":r}let desc=ed(dr,pt,t),g=[],a=n=>g.push(n);a({"@type":"WebSite",name:o,url:"https://postfreesg.com/"});a({"@type":"LocalBusiness",name:o,url:"https://postfreesg.com/",description:"PostFreeSG is Singapore’s 100% free classifieds platform for property, jobs, services and items for sale.",address:{"@type":"PostalAddress",addressCountry:"SG"}});if(p!=="/"){let c=[],parts=p.split("/").filter(Boolean).filter(x=>!x.match(/index\.html$/)),r="/";c.push({"@type":"ListItem",position:0,name:"Home",item:{"@type":"WebPage","@id":"https://postfreesg.com/"}});parts.forEach((s,i)=>{r+=s+"/";let clean=s.replace(/\.html$/,"").replace(/[-_]/g," ").replace(/\b\w/g,m=>m.toUpperCase());c.push({"@type":"ListItem",position:i+1,name:clean,item:{"@type":"WebPage","@id":location.origin+r}})});a({"@type":"BreadcrumbList",itemListElement:c})}("/"===p||"/index.html"===p)&&a({"@type":"WebPage",name:"PostFreeSG — Free Classified Listings in Singapore",description:desc,url:u});("/about"===p||"/about.html"===p)&&a({"@type":"AboutPage",name:t,description:desc,url:u});("/listings"===p||"/listings.html"===p)&&a({"@type":"CollectionPage",name:"All Listings — PostFreeSG",description:desc,url:u});("/blog"===p||"/blog.html"===p)&&a({"@type":"CollectionPage",name:"PostFreeSG Blog",description:desc,url:u});p.startsWith("/blog/")&&p.endsWith(".html")&&a({"@type":"BlogPosting",headline:t,description:desc,datePublished:d||new Date().toISOString(),author:o,mainEntityOfPage:u});let fi=[...document.querySelectorAll(".faq-item")];fi.length>1&&a({"@type":"FAQPage",mainEntity:fi.map(x=>{let q=x.querySelector("strong")?.innerText,a1=x.querySelector("p")?.innerText;return q&&a1?{"@type":"Question",name:q,acceptedAnswer:{"@type":"Answer",text:a1}}:null}).filter(Boolean)});g.length===0&&a({"@type":"WebPage",name:t,description:desc,url:u});let sc=document.createElement("script");sc.type="application/ld+json",sc.textContent=JSON.stringify({"@context":"https://schema.org","@graph":g}),document.head.appendChild(sc)});
